function glitch(){var e=document.querySelector("body"),t=e.className;t.indexOf("no-glitch")<=-1?e.className+=" no-glitch":e.classList.remove("no-glitch")}function caret(e){var t=e.value,n=document.querySelector("[data-for="+e.getAttribute("id")+"]");n.setAttribute("data-value",t)}function addEntry(e){e.preventDefault();var t=document.querySelector("#entry-body").value,n=Date.now();firebase.database().ref("entries/"+n).set({body:t,date:n}),document.querySelector("#entry-body").value="",document.querySelector("#entry-body").focus()}function convertDate(e){var t=new Date(e),n=t.getMonth();n=parseInt(n+1),n<10&&(n="0"+n);var a=t.getDate(),r=t.getFullYear();return r+"."+n+"."+a}!function e(){var t=Math.round(5e3*Math.random());setTimeout(function(){glitch(),e()},t)}();var inputs=document.querySelectorAll("input");for(i=0;i<inputs.length;i++)inputs[i].addEventListener("input",function(){caret(this)});var consoleForm=document.querySelector(".console"),bash=document.querySelector("#console-bash"),uname=document.querySelector("#console-uname"),pass=document.querySelector("#console-pass");document.addEventListener("keydown",function(e){27==e.keyCode&&e.ctrlKey&&(consoleForm.className+=" visible")}),bash.addEventListener("keydown",function(e){if("13"==e.keyCode){e.preventDefault();var t=bash.value;"login"==t?(consoleForm.className+=" login-uname",uname.focus()):(bash.value="Command not found",caret(bash),setTimeout(function(){bash.value="",caret(bash)},2e3))}}),uname.addEventListener("keydown",function(e){"13"==e.keyCode&&(e.preventDefault(),consoleForm.classList.remove("login-uname"),consoleForm.className+=" login-pass",pass.focus())});var config={apiKey:"AIzaSyADrNEqbp5PZ1m8BWGV6Pwg45_yGvMKEmQ",databaseURL:"https://nms-log.firebaseio.com"};firebase.initializeApp(config);var entries=firebase.database().ref("entries").orderByKey();entries.on("value",function(e){var t=e.val(),n=[];for(u in t)n.push(t[u]);n.reverse();for(var a=document.querySelector(".log");a.hasChildNodes();)a.removeChild(a.lastChild);for(u in n){var r=n[u].date,o=n[u].body;a.innerHTML+='<li><article class="entry"><h2 class="entry_stamp"><time class="hdg" pubdate>â˜‰ '+convertDate(r)+'</time></h2><div class="entry_body body">'+o+"</div></article></li>"}var s=document.querySelectorAll(".hdg, .entry_body p, .entry_body li");for(u=0;u<s.length;u++){var i=s[u].innerHTML;s[u].setAttribute("data-copy",i)}for(var c=document.querySelectorAll(".entry img"),u=0;u<c.length;u++){var l=document.createElement("span");l.setAttribute("class","entry_img");var d=c[u].getAttribute("src"),m=document.createElement("img"),y=document.createElement("img");m.setAttribute("src",d),m.setAttribute("class","img-before"),y.setAttribute("src",d),y.setAttribute("class","img-after"),c[u].parentNode.insertBefore(l,c[u]),l.appendChild(m),l.appendChild(c[u]),l.appendChild(y)}}),firebase.auth().signOut(),pass.addEventListener("keydown",function(e){if("13"==e.keyCode){var t=uname.value,n=pass.value;firebase.auth().signInWithEmailAndPassword(t,n)}}),firebase.auth().onAuthStateChanged(function(e){var t=document.querySelector("body");e?(t.className+=" logged-in",consoleForm.classList.remove("visible"),document.querySelector("#entry-body").focus()):t.classList.remove("logged-in")});var submitForm=document.querySelector(".submit");submitForm.onsubmit=addEntry;